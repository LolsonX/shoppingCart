#!/usr/bin/env ruby

require 'fileutils'
require 'yaml'

APP_ROOT = File.expand_path('..', __dir__)

require_relative "#{APP_ROOT}/utils/database_generator"

APP_ENV = ENV.fetch('APP_ENVIRONMENT', nil)
CONFIG_FILE_PATH = File.join(APP_ROOT, 'config', 'app.yml')
CONFIG_FILE = YAML.load_file(CONFIG_FILE_PATH)
DATABASE_DIR = File.join(APP_ROOT, 'database')

FileUtils.mkdir_p DATABASE_DIR
if APP_ENV.nil?
  CONFIG_FILE.each_key do |env|
    DatabaseGenerator.create_database(env)
  end
else
  DatabaseGenerator.create_database(APP_ENV)
end

