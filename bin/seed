#!/usr/bin/env ruby

require 'yaml'

APP_ROOT = File.expand_path('..', __dir__)
raise Exception, "Seed file not found" unless File.exist?("#{APP_ROOT}/database/seed.rb")

require_relative "#{APP_ROOT}/database/seed"

APP_ENV = ENV.fetch('APP_ENVIRONMENT', 'development')

CONFIG_FILE_PATH = File.join(APP_ROOT, 'config', 'app.yml')
CONFIG_FILE = YAML.load_file(CONFIG_FILE_PATH)

DATABASE_DIR = File.join(APP_ROOT, 'database')

DATABASE_FILE = File.join(DATABASE_DIR, CONFIG_FILE[APP_ENV]['database']['file'])

seed(DATABASE_FILE)